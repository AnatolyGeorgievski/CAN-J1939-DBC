
# Генерация структур данных из матрицы сообщений CAN

Автор:
* __[Анатолий Георгиевский](https://github.com/AnatolyGeorgievski)__

## Назначение

Формат предназначен для формального описания матрицы сообщений CAN. 

Формат позволяет описывать структуру сообщений CAN для стандартых и расширенных пакетов, 
подходит для описания прикладных протоколов таких как CANopen, J1939.

На основе формата J1939DBC выполняется генерация структур данных для обработки, диагностики и разбора сообщений CAN.
Целью генерации могут быть исходные коды и заголовки Си, таблицы CSV или SQL запросы на формирование базы. 

Формат применяется для формализованного обмена между производителями оборудования. 

Автоматический синтез структур данных позволяет свести к минимуму ошибки прогр, снизить расходы на разработку программ,
Снизить трудозатраты связанные с синхронизацией изменений при обновлении состава оборудования.


## Сборка из исходного кода

```shell
$ gcc can_dbc.c -o dbc `pkg-config.exe --cflags --libs glib-2.0`
```
## Состав пакета

* _can_ev.h_ -- основной заголовок, содержит макросы разбора кадров 
и структуру can_frame, can_filter. 
* _can_ev.c_ -- сериализация данных для CAN, протокол EV-1.0
* _can_ev_modbus.c_ -- сериализация данных для RS-485 Modbus RTU, протокол EV-1.0
* _can_ev_serial.c_ -- сериализация данных для UART point-to-point, протокол EV-1.0
* _can_j1850_crc.c_ -- расчет контрольной суммы кадра CRC-8/SAE-J1850, компактаня реализация

## Описание формата J1939 DBC

Формат тестовый. Состоит из строк. Строки могут группироваться. Каждая строка начинается с ключевого слова.

Для формального описания используются обозначения:
>   |  выбор элемента из перечня вариантов\
>   (* *) комментарий\
>   [ ] - необязательный элемент\
>   { } - повторение 0 и более раз

### Структура документа 

```
VERSION: "EV 2023-03-25" (* Версия документа *)
NS_: (* Пространство имен *)
BS_: (* Характеристики линии CAN *)
BU_: (* Перечисление функциональных блоков, устройств на линии *)
BO_ ... (* Описание сообщений *) 
	SG_ ... (* Описание сигналов *) 
	SG_ ... (* Описание сигналов *) 
```
